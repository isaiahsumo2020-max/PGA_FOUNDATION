<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donate - PGAF | Choose Your Program</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="js/authService.js" defer></script>
    <script src="js/donationService.js" defer></script>
    <link rel="stylesheet" href="CSS/mobile_fixe.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="font-inter bg-blue-50/50 min-h-screen antialiased">

    <!-- Navigation (PGAF Blue Branding) -->
    <nav class="bg-white/90 backdrop-blur-md shadow-sm sticky top-0 z-50 border-b border-blue-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="index.html" class="flex items-center space-x-3 group">
                    <div class="w-12 h-12 bg-blue-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-all duration-300">
                        <i class="fas fa-fire text-yellow-400 text-xl"></i>
                    </div>
                    <div>
                        <div class="text-xl font-bold text-blue-700 tracking-tight">PGAF</div>
                        <div class="text-xs font-semibold text-blue-600 uppercase tracking-wider">Passionate Goals Achievers Foundation</div>
                    </div>
                </a>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="index.html" class="text-gray-700 hover:text-blue-600 font-medium px-2 py-1 border-b-2 border-transparent hover:border-blue-500">Home</a>
                    <a href="programs.html" class="text-gray-700 hover:text-blue-600 font-medium px-2 py-1 border-b-2 border-transparent hover:border-blue-500">Programs</a>
                    <a href="team.html" class="text-gray-700 hover:text-blue-600 font-medium px-2 py-1 border-b-2 border-transparent hover:border-blue-500">Team</a>
                    <a href="events.html" class="text-gray-700 hover:text-blue-600 font-medium px-2 py-1 border-b-2 border-transparent hover:border-blue-500">Events</a>
                    <a href="contact.html" class="text-gray-700 hover:text-blue-600 font-medium px-2 py-1 border-b-2 border-transparent hover:border-blue-500">Contact</a>
                    <a href="donation.html" class="text-blue-600 font-bold border-b-2 border-blue-500 px-2 py-1">Donate</a>
                </div>
                <div class="flex items-center space-x-4">
                    <div id="userStatus" class="hidden items-center space-x-3 bg-blue-50 px-4 py-2 rounded-xl">
                        <span id="userName" class="font-semibold text-blue-800 text-sm"></span>
                        <a href="dashboard.html" class="text-blue-600 hover:text-blue-700 text-sm font-medium">Dashboard</a>
                        <button onclick="logout()" class="text-red-600 hover:text-red-700 text-sm font-medium">Logout</button>
                    </div>
                    <a id="loginBtn" href="login.html" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-xl font-semibold text-sm shadow-md hover:shadow-lg transition-all">
                        Get Involved
                    </a>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobileMenu" class="md:hidden hidden bg-white border-t border-blue-100 shadow-lg">
            <div class="px-4 pt-4 pb-6 space-y-2">
                <a href="index.html" class="block px-4 py-3 text-gray-700 hover:text-blue-600 font-medium rounded-xl hover:bg-blue-50">Home</a>
                <a href="donation.html" class="block px-4 py-3 text-blue-600 font-bold bg-blue-50 rounded-xl">Donate</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="relative pt-32 pb-24 bg-gradient-to-br from-blue-600/10 to-blue-700/20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <div class="inline-flex items-center bg-yellow-400/90 px-8 py-4 rounded-full text-lg font-bold text-blue-900 mb-12 shadow-lg backdrop-blur-sm">
                <i class="fas fa-hand-holding-heart mr-3 text-2xl"></i>
                Direct Impact Donations - Choose Your Cause
            </div>
            <h1 class="text-5xl lg:text-6xl font-bold text-gray-900 mb-8 leading-tight">
                Transform Lives
                <span class="block text-4xl lg:text-5xl text-blue-700 font-black tracking-tight">Choose Your Program</span>
            </h1>
            <p class="text-xl text-gray-700 max-w-4xl mx-auto leading-relaxed mb-12">
                Every dollar goes directly to your selected program. Track your impact on the dashboard!
            </p>
        </div>
    </section>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24">
        <div class="grid lg:grid-cols-2 gap-16 items-start">
            
            <!-- Donation Form with Program Selection -->
            <div class="bg-white/90 backdrop-blur-xl rounded-4xl p-12 shadow-2xl border border-blue-100 sticky top-32 lg:sticky">
                <div id="donationFormContainer">
                    
                    <!-- NEW: Program Selection -->
                    <div class="mb-12">
                        <label class="block text-2xl font-bold text-gray-900 mb-6 flex items-center">
                            <i class="fas fa-project-diagram mr-4 text-blue-600 text-3xl"></i>
                            Select Program
                        </label>
                        <div class="grid md:grid-cols-2 gap-4 mb-8">
                            <div class="program-card group relative p-6 rounded-3xl border-3 border-blue-200 hover:border-blue-400 hover:shadow-2xl transition-all cursor-pointer bg-gradient-to-br from-blue-50 to-blue-100" onclick="selectProgram('education', this)">
                                <i class="fas fa-graduation-cap absolute top-6 right-6 text-3xl text-blue-600 opacity-0 group-hover:opacity-100 transition-all"></i>
                                <div class="h-20 w-20 bg-blue-600 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-2xl group-hover:scale-110 transition-all">
                                    <i class="fas fa-graduation-cap text-3xl text-white"></i>
                                </div>
                                <h4 class="text-xl font-bold text-gray-900 mb-3 text-center">Education</h4>
                                <p class="text-blue-800 font-semibold text-center text-lg">$25 = Books for 10 kids</p>
                                <div class="absolute inset-0 bg-blue-500/10 rounded-3xl opacity-0 group-hover:opacity-100 transition-all pointer-events-none"></div>
                            </div>
                            <div class="program-card group relative p-6 rounded-3xl border-3 border-emerald-200 hover:border-emerald-400 hover:shadow-2xl transition-all cursor-pointer bg-gradient-to-br from-emerald-50 to-emerald-100" onclick="selectProgram('entrepreneurship', this)">
                                <i class="fas fa-lightbulb absolute top-6 right-6 text-3xl text-emerald-600 opacity-0 group-hover:opacity-100 transition-all"></i>
                                <div class="h-20 w-20 bg-emerald-600 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-2xl group-hover:scale-110 transition-all">
                                    <i class="fas fa-lightbulb text-3xl text-white"></i>
                                </div>
                                <h4 class="text-xl font-bold text-gray-900 mb-3 text-center">Entrepreneurship</h4>
                                <p class="text-emerald-800 font-semibold text-center text-lg">$50 = Startup kit</p>
                                <div class="absolute inset-0 bg-emerald-500/10 rounded-3xl opacity-0 group-hover:opacity-100 transition-all pointer-events-none"></div>
                            </div>
                            <div class="program-card group relative p-6 rounded-3xl border-3 border-yellow-200 hover:border-yellow-400 hover:shadow-2xl transition-all cursor-pointer bg-gradient-to-br from-yellow-50 to-yellow-100" onclick="selectProgram('arts', this)">
                                <i class="fas fa-palette absolute top-6 right-6 text-3xl text-yellow-600 opacity-0 group-hover:opacity-100 transition-all"></i>
                                <div class="h-20 w-20 bg-yellow-500 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-2xl group-hover:scale-110 transition-all">
                                    <i class="fas fa-palette text-3xl text-white"></i>
                                </div>
                                <h4 class="text-xl font-bold text-gray-900 mb-3 text-center">Creative Arts</h4>
                                <p class="text-yellow-800 font-semibold text-center text-lg">$30 = Music lessons</p>
                                <div class="absolute inset-0 bg-yellow-500/10 rounded-3xl opacity-0 group-hover:opacity-100 transition-all pointer-events-none"></div>
                            </div>
                            <div class="program-card group relative p-6 rounded-3xl border-3 border-orange-200 hover:border-orange-400 hover:shadow-2xl transition-all cursor-pointer bg-gradient-to-br from-orange-50 to-orange-100" onclick="selectProgram('relief', this)">
                                <i class="fas fa-hands-helping absolute top-6 right-6 text-3xl text-orange-600 opacity-0 group-hover:opacity-100 transition-all"></i>
                                <div class="h-20 w-20 bg-orange-500 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-2xl group-hover:scale-110 transition-all">
                                    <i class="fas fa-hands-helping text-3xl text-white"></i>
                                </div>
                                <h4 class="text-xl font-bold text-gray-900 mb-3 text-center">Emergency Relief</h4>
                                <p class="text-orange-800 font-semibold text-center text-lg">$20 = Food for family</p>
                                <div class="absolute inset-0 bg-orange-500/10 rounded-3xl opacity-0 group-hover:opacity-100 transition-all pointer-events-none"></div>
                            </div>
                        </div>
                        <div id="selectedProgramDisplay" class="hidden bg-blue-600 text-white p-6 rounded-3xl shadow-2xl text-center">
                            <i class="fas fa-check-circle text-3xl mb-4"></i>
                            <h5 id="programName" class="text-2xl font-bold mb-2"></h5>
                            <p id="programImpact" class="text-lg opacity-90"></p>
                        </div>
                    </div>

                    <!-- NEW: User Group/Organization -->
                    <div class="mb-12" id="userGroupSection">
                        <label class="block text-2xl font-bold text-gray-900 mb-6 flex items-center">
                            <i class="fas fa-users mr-4 text-blue-600 text-3xl"></i>
                            Your Affiliation
                        </label>
                        <div class="grid md:grid-cols-2 gap-4 mb-6">
                            <select id="userGroup" class="p-6 border-2 border-blue-200 rounded-3xl text-lg font-semibold focus:border-blue-400 focus:ring-4 focus:ring-blue-100">
                                <option value="">Select your group/church/company</option>
                                <option value="church">Church Group</option>
                                <option value="school">School/University</option>
                                <option value="company">Company/Corporate</option>
                                <option value="individual">Individual Donor</option>
                                <option value="foundation">Foundation/NGO</option>
                                <option value="other">Other Organization</option>
                            </select>
                            <input id="groupName" type="text" placeholder="Your church name, company, etc." class="p-6 border-2 border-blue-200 rounded-3xl text-lg font-semibold focus:border-blue-400 focus:ring-4 focus:ring-blue-100" maxlength="100">
                        </div>
                    </div>

                    <!-- Amount Selection -->
                    <div class="mb-12">
                        <label class="block text-2xl font-bold text-gray-900 mb-6 flex items-center">
                            <i class="fas fa-dollar-sign mr-4 text-yellow-500 text-3xl"></i>
                            Donation Amount
                        </label>
                        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                            <button type="button" onclick="setAmount(25)" class="quick-amount p-6 rounded-3xl font-bold text-2xl shadow-xl hover:shadow-2xl transition-all border-3 border-blue-200 hover:border-blue-400 hover:bg-blue-50 group bg-blue-50 text-blue-700">
                                <div class="text-3xl mb-1 group-hover:scale-110">$25</div>
                                <div class="text-xs uppercase">Quick Gift</div>
                            </button>
                            <button type="button" onclick="setAmount(50)" class="quick-amount p-6 rounded-3xl font-bold text-2xl shadow-xl hover:shadow-2xl transition-all border-3 border-emerald-200 hover:border-emerald-400 hover:bg-emerald-50 group bg-emerald-50 text-emerald-700">
                                <div class="text-3xl mb-1 group-hover:scale-110">$50</div>
                                <div class="text-xs uppercase">Family</div>
                            </button>
                            <button type="button" onclick="setAmount(100)" class="quick-amount p-6 rounded-3xl font-bold text-2xl shadow-xl hover:shadow-2xl transition-all border-3 border-yellow-200 hover:border-yellow-400 hover:bg-yellow-50 group bg-yellow-50 text-yellow-700">
                                <div class="text-3xl mb-1 group-hover:scale-110">$100</div>
                                <div class="text-xs uppercase">Impact</div>
                            </button>
                            <button type="button" onclick="setAmount(500)" class="quick-amount p-6 rounded-3xl font-bold text-2xl shadow-xl hover:shadow-2xl transition-all border-3 border-orange-200 hover:border-orange-400 hover:bg-orange-50 group bg-orange-50 text-orange-700">
                                <div class="text-3xl mb-1 group-know:scale-110">$500</div>
                                <div class="text-xs uppercase">Transform</div>
                            </button>
                        </div>
                        <input type="number" id="customAmount" min="1" step="1" class="w-full px-8 py-8 border-3 border-blue-200 rounded-3xl shadow-xl text-3xl font-black text-right text-gray-900 focus:ring-8 focus:ring-blue-200 focus:border-blue-500 transition-all bg-gradient-to-r from-blue-50 to-blue-100 tracking-wide" placeholder="Enter custom amount">
                    </div>

                    <!-- Auth & Donate Buttons -->
                    <div id="loginPrompt" class="bg-gradient-to-r from-blue-50 to-blue-100 border-4 border-blue-200/50 rounded-4xl p-12 text-center shadow-2xl hidden">
                        <div class="w-24 h-24 bg-blue-600 rounded-3xl flex items-center justify-center mx-auto mb-8 shadow-2xl">
                            <i class="fas fa-lock-open text-3xl text-white"></i>
                        </div>
                        <h4 class="text-3xl font-bold text-blue-900 mb-6">Login Required</h4>
                        <p class="text-xl text-blue-800 mb-10 leading-relaxed">Track your donations and see real impact by creating a free account!</p>
                        <a href="login.html" class="inline-flex items-center px-12 py-6 bg-blue-600 text-white font-bold text-xl rounded-3xl shadow-2xl hover:shadow-3xl transition-all w-full">
                            <i class="fas fa-sign-in-alt mr-4"></i>Sign In Securely
                        </a>
                    </div>

                    <div id="donateButtonContainer" class="hidden">
                        <button onclick="processDonation()" id="donateBtn" class="w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white py-10 px-12 rounded-4xl font-black text-2xl shadow-2xl hover:shadow-3xl transition-all transform hover:-translate-y-2 group">
                            <div class="flex items-center justify-center">
                                <i class="fas fa-rocket text-4xl mr-6 group-hover:scale-110 transition-transform"></i>
                                <span>ðŸš€ Donate to Selected Program</span>
                            </div>
                            <div class="mt-4 text-lg opacity-90 font-semibold tracking-wide uppercase">100% Secure â€¢ Instant Receipt â€¢ Track Impact</div>
                        </button>
                    </div>
                </div>

                <!-- Success Screen -->
                <div id="donationSuccess" class="hidden bg-gradient-to-br from-emerald-50 to-blue-50 border-8 border-emerald-200/50 rounded-4xl p-16 text-center shadow-2xl">
                    <div class="w-40 h-40 bg-gradient-to-r from-emerald-500 to-blue-600 rounded-4xl flex items-center justify-center mx-auto mb-12 shadow-4xl ring-8 ring-emerald-300/50">
                        <i class="fas fa-check-double text-6xl text-white"></i>
                    </div>
                    <h3 class="text-5xl font-black text-emerald-800 mb-8 drop-shadow-2xl">SUCCESS!</h3>
                    <div id="successAmount" class="text-6xl font-black text-blue-600 mb-8 drop-shadow-4xl">$250</div>
                    <div id="successProgram" class="text-2xl font-bold text-emerald-800 mb-12 p-6 bg-emerald-100 rounded-3xl"></div>
                    <div class="grid grid-cols-2 gap-6">
                        <a href="dashboard.html" class="group p-8 bg-gradient-to-r from-emerald-600 to-blue-600 text-white font-bold rounded-3xl shadow-2xl hover:shadow-3xl transition-all hover:-translate-y-2">
                            <i class="fas fa-tachometer-alt text-3xl mb-4 block group-hover:scale-110"></i>Track Impact
                        </a>
                        <a href="donation.html" class="group p-8 bg-white text-blue-700 font-bold rounded-3xl shadow-xl hover:shadow-2xl transition-all border-4 border-blue-200 hover:border-blue-300 hover:-translate-y-2">
                            <i class="fas fa-plus-circle text-3xl mb-4 block group-hover:scale-110"></i>Donate Again
                        </a>
                    </div>
                </div>
            </div>

            <!-- Programs Impact Preview -->
            <div class="space-y-12 lg:sticky lg:top-32">
                <div class="bg-white/90 backdrop-blur-xl rounded-4xl p-10 shadow-2xl border border-blue-100">
                    <h4 class="text-3xl font-bold text-gray-900 mb-8 flex items-center">
                        <i class="fas fa-hand-holding-heart mr-4 text-yellow-500 text-3xl"></i>
                        Your Impact by Program
                    </h4>
                    <div id="impactPreview" class="space-y-6">
                        <div class="flex items-start space-x-4 p-6 bg-gradient-to-r from-blue-50 to-emerald-50 rounded-3xl border-l-6 border-blue-400 opacity-50">
                            <div class="w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center flex-shrink-0 mt-1">
                                <i class="fas fa-graduation-cap text-xl text-white"></i>
                            </div>
                            <div>
                                <h6 class="text-xl font-bold text-gray-900 mb-2">Education Program</h6>
                                <p class="text-gray-700">$25 = School books for 10 children</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedProgram = null;
        let currentAmount = 0;
        let userGroup = '';
        let userOrgName = '';

        document.addEventListener('DOMContentLoaded', function() {
            checkAuthStatus();
            document.getElementById('customAmount').addEventListener('input', formatAmount);
        });

        function selectProgram(programId, element) {
            selectedProgram = programId;
            
            // Remove active state from all cards
            document.querySelectorAll('.program-card').forEach(card => {
                card.classList.remove('ring-4', 'ring-blue-500', 'bg-blue-100', 'shadow-2xl', 'scale-105');
                card.style.borderColor = '#dbeafe';
            });
            
            // Add active state
            element.classList.add('ring-4', 'ring-blue-500', 'shadow-2xl', 'scale-105');
            element.style.borderColor = '#3b82f6';
            
            // Show selected program
            const programs = {
                'education': { name: 'Education Scholarships', impact: '$25 = Books for 10 kids' },
                'entrepreneurship': { name: 'Youth Entrepreneurship', impact: '$50 = Startup kit for 1 youth' },
                'arts': { name: 'Creative Arts', impact: '$30 = Music/art lessons for 1 month' },
                'relief': { name: 'Emergency Relief', impact: '$20 = Food for 1 family (1 week)' }
            };
            
            const program = programs[programId];
            document.getElementById('programName').textContent = program.name;
            document.getElementById('programImpact').textContent = program.impact;
            document.getElementById('selectedProgramDisplay').classList.remove('hidden');
            
            // Update impact preview
            updateImpactPreview();
        }

        function setAmount(amount) {
            currentAmount = amount;
            document.getElementById('customAmount').value = amount;
            document.querySelectorAll('.quick-amount').forEach(btn => {
                btn.classList.remove('ring-4', 'ring-blue-500', 'scale-105');
            });
            event.target.classList.add('ring-4', 'ring-blue-500', 'scale-105');
        }

        function formatAmount(e) {
            let value = e.target.value.replace(/[^\d]/g, '');
            if (value) {
                e.target.value = parseInt(value).toLocaleString();
                currentAmount = parseInt(value);
            }
        }

        function updateImpactPreview() {
            const preview = document.getElementById('impactPreview');
            if (selectedProgram) {
                const programs = {
                    'education': 'School books for 10 children',
                    'entrepreneurship': 'Startup kit for 1 youth',
                    'arts': 'Music/art lessons for 1 month',
                    'relief': 'Food for 1 family (1 week)'
                };
                preview.innerHTML = `
                    <div class="flex items-start space-x-4 p-6 bg-gradient-to-r from-blue-50 to-emerald-50 rounded-3xl border-l-6 border-blue-400">
                        <div class="w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center flex-shrink-0 mt-1">
                            <i class="fas fa-${getProgramIcon(selectedProgram)} text-xl text-white"></i>
                        </div>
                        <div>
                            <h6 class="text-xl font-bold text-gray-900 mb-2">${getProgramName(selectedProgram)}</h6>
                            <p class="text-gray-700">${programs[selectedProgram]} â€¢ <span class="font-bold text-blue-600">$${currentAmount?.toLocaleString() || '0'}</span></p>
                        </div>
                    </div>
                `;
            }
        }

        function getProgramIcon(program) {
            const icons = { education: 'graduation-cap', entrepreneurship: 'lightbulb', arts: 'palette', relief: 'hands-helping' };
            return icons[program] || 'heart';
        }

        function getProgramName(program) {
            const names = { education: 'Education Program', entrepreneurship: 'Entrepreneurship', arts: 'Creative Arts', relief: 'Emergency Relief' };
            return names[program] || 'Selected Program';
        }

        function checkAuthStatus() {
            const userStatus = document.getElementById('userStatus');
            const loginBtn = document.getElementById('loginBtn');
            const loginPrompt = document.getElementById('loginPrompt');
            const donateContainer = document.getElementById('donateButtonContainer');
            const userGroupSection = document.getElementById('userGroupSection');

            if (isLoggedIn()) {
                const user = getCurrentUser();
                document.getElementById('userName').textContent = user.name;
                userStatus.classList.remove('hidden');
                loginBtn.classList.add('hidden');
                loginPrompt.classList.add('hidden');
                donateContainer.classList.remove('hidden');
                userGroupSection.style.display = 'block';
                
                // Pre-fill user group if available
                if (user.group) {
                    document.getElementById('userGroup').value = user.group;
                    document.getElementById('groupName').value = user.orgName || '';
                }
            } else {
                userStatus.classList.add('hidden');
                loginBtn.classList.remove('hidden');
                loginPrompt.classList.remove('hidden');
                donateContainer.classList.add('hidden');
                userGroupSection.style.display = 'none';
            }
        }

        async function processDonation() {
            if (!selectedProgram) {
                alert('Please select a program to support');
                return;
            }
            if (!currentAmount || currentAmount <= 0) {
                alert('Please enter a donation amount');
                return;
            }
            if (!isLoggedIn()) {
                window.location.href = 'login.html';
                return;
            }

            userGroup = document.getElementById('userGroup').value;
            userOrgName = document.getElementById('groupName').value.trim();

            if (!userGroup) {
                alert('Please select your affiliation/group');
                return;
            }

            const donateBtn = document.getElementById('donateBtn');
            donateBtn.disabled = true;
            donateBtn.innerHTML = '<i class="fas fa-spinner fa-spin text-4xl mr-6"></i>Processing Secure Donation...';

            try {
                await new Promise(resolve => setTimeout(resolve, 2500));
                
                const donationData = {
                    amount: currentAmount,
                    program: selectedProgram,
                    userGroup: userGroup,
                    orgName: userOrgName,
                    timestamp: new Date().toISOString()
                };

                await addDonation(donationData);
                
                // Show success
                document.getElementById('donationFormContainer').classList.add('hidden');
                document.getElementById('donationSuccess').classList.remove('hidden');
                document.getElementById('successAmount').textContent = `$${currentAmount.toLocaleString()}`;
                document.getElementById('successProgram').innerHTML = `
                    <strong>${getProgramName(selectedProgram)}</strong><br>
                    <span class="text-lg">${userGroup.toUpperCase()} â€¢ ${userOrgName || 'Individual'}</span>
                `;
                
            } catch (error) {
                alert('Donation error: ' + error.message);
            } finally {
                donateBtn.disabled = false;
                donateBtn.innerHTML = '<i class="fas fa-rocket text-4xl mr-6"></i>ðŸš€ Donate Now Instantly<div class="mt-4 text-lg opacity-90 font-semibold tracking-wide uppercase">100% Secure â€¢ Instant Receipt</div>';
            }
        }

        // Watch for group changes
        document.getElementById('userGroup').addEventListener('change', function() {
            userGroup = this.value;
        });
    </script>
</body>
</html>
